import{O as re,V as F,M as se,L as ie,a as le,F as ne,b as ce,R as de,C as B,c as D,d as W,D as pe,T as me,s as fe,G as he,B as q,e as k,f as T,g as J,P as O,h as Z,i as I,j as S,k as ue,S as ge,A as ye,l as be,m as xe,n as we,W as ve,o as ze,p as Ce,q as Le,r as Me,t as je,u as _e}from"./OrbitControls.a92ccbbb.js";import{_ as Ae,o as Ne,a as Fe,c as ke,b as oe}from"./index.a9d7f838.js";class ae extends re{constructor(t=document.createElement("div")){super(),this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(s){s.element instanceof Element&&s.element.parentNode!==null&&s.element.parentNode.removeChild(s.element)})})}copy(t,s){return super.copy(t,s),this.element=t.element.cloneNode(!0),this}}ae.prototype.isCSS2DObject=!0;const N=new F,$=new se,K=new se,Q=new F,X=new F;class Pe{constructor(t={}){const s=this;let n,e,i,r;const c={objects:new WeakMap},a=t.element!==void 0?t.element:document.createElement("div");a.style.overflow="hidden",this.domElement=a,this.getSize=function(){return{width:n,height:e}},this.render=function(o,l){o.autoUpdate===!0&&o.updateMatrixWorld(),l.parent===null&&l.updateMatrixWorld(),$.copy(l.matrixWorldInverse),K.multiplyMatrices(l.projectionMatrix,$),p(o,o,l),w(o)},this.setSize=function(o,l){n=o,e=l,i=n/2,r=e/2,a.style.width=o+"px",a.style.height=l+"px"};function p(o,l,v){if(o.isCSS2DObject){N.setFromMatrixPosition(o.matrixWorld),N.applyMatrix4(K);const u=o.visible===!0&&N.z>=-1&&N.z<=1&&o.layers.test(v.layers)===!0;if(o.element.style.display=u===!0?"":"none",u===!0){o.onBeforeRender(s,l,v);const L=o.element;/apple/i.test(navigator.vendor)?L.style.transform="translate(-50%,-50%) translate("+Math.round(N.x*i+i)+"px,"+Math.round(-N.y*r+r)+"px)":L.style.transform="translate(-50%,-50%) translate("+(N.x*i+i)+"px,"+(-N.y*r+r)+"px)",L.parentNode!==a&&a.appendChild(L),o.onAfterRender(s,l,v)}const x={distanceToCameraSquared:C(v,o)};c.objects.set(o,x)}for(let u=0,x=o.children.length;u<x;u++)p(o.children[u],l,v)}function C(o,l){return Q.setFromMatrixPosition(o.matrixWorld),X.setFromMatrixPosition(l.matrixWorld),Q.distanceToSquared(X)}function h(o){const l=[];return o.traverse(function(v){v.isCSS2DObject&&l.push(v)}),l}function w(o){const l=h(o).sort(function(u,x){if(u.renderOrder!==x.renderOrder)return x.renderOrder-u.renderOrder;const L=c.objects.get(u).distanceToCameraSquared,z=c.objects.get(x).distanceToCameraSquared;return L-z}),v=l.length;for(let u=0,x=l.length;u<x;u++)l[u].element.style.zIndex=v-u}}}class Se extends ie{constructor(t){super(t)}load(t,s,n,e){const i=this,r=this.path===""?le.extractUrlBase(t):this.path,c=new ne(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(a){try{s(i.parse(a,r))}catch(p){e?e(p):console.error(p),i.manager.itemError(t)}},n,e)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,s){const n=t.split(`
`);let e={};const i=/\s+/,r={};for(let a=0;a<n.length;a++){let p=n[a];if(p=p.trim(),p.length===0||p.charAt(0)==="#")continue;const C=p.indexOf(" ");let h=C>=0?p.substring(0,C):p;h=h.toLowerCase();let w=C>=0?p.substring(C+1):"";if(w=w.trim(),h==="newmtl")e={name:w},r[w]=e;else if(h==="ka"||h==="kd"||h==="ks"||h==="ke"){const o=w.split(i,3);e[h]=[parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])]}else e[h]=w}const c=new Oe(this.resourcePath||s,this.materialOptions);return c.setCrossOrigin(this.crossOrigin),c.setManager(this.manager),c.setMaterials(r),c}}class Oe{constructor(t="",s={}){this.baseUrl=t,this.options=s,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:ce,this.wrap=this.options.wrap!==void 0?this.options.wrap:de}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const s={};for(const n in t){const e=t[n],i={};s[n]=i;for(const r in e){let c=!0,a=e[r];const p=r.toLowerCase();switch(p){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&a[0]===0&&a[1]===0&&a[2]===0&&(c=!1);break}c&&(i[p]=a)}}return s}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const s in this.materialsInfo)this.materialsArray[t]=this.create(s),this.nameLookup[s]=t,t++;return this.materialsArray}create(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const s=this,n=this.materialsInfo[t],e={name:t,side:this.side};function i(c,a){return typeof a!="string"||a===""?"":/^https?:\/\//i.test(a)?a:c+a}function r(c,a){if(e[c])return;const p=s.getTextureParams(a,e),C=s.loadTexture(i(s.baseUrl,p.url));C.repeat.copy(p.scale),C.offset.copy(p.offset),C.wrapS=s.wrap,C.wrapT=s.wrap,(c==="map"||c==="emissiveMap")&&(C.encoding=fe),e[c]=C}for(const c in n){const a=n[c];let p;if(a!=="")switch(c.toLowerCase()){case"kd":e.color=new B().fromArray(a).convertSRGBToLinear();break;case"ks":e.specular=new B().fromArray(a).convertSRGBToLinear();break;case"ke":e.emissive=new B().fromArray(a).convertSRGBToLinear();break;case"map_kd":r("map",a);break;case"map_ks":r("specularMap",a);break;case"map_ke":r("emissiveMap",a);break;case"norm":r("normalMap",a);break;case"map_bump":case"bump":r("bumpMap",a);break;case"map_d":r("alphaMap",a),e.transparent=!0;break;case"ns":e.shininess=parseFloat(a);break;case"d":p=parseFloat(a),p<1&&(e.opacity=p,e.transparent=!0);break;case"tr":p=parseFloat(a),this.options&&this.options.invertTrProperty&&(p=1-p),p>0&&(e.opacity=1-p,e.transparent=!0);break}}return this.materials[t]=new D(e),this.materials[t]}getTextureParams(t,s){const n={scale:new W(1,1),offset:new W(0,0)},e=t.split(/\s+/);let i;return i=e.indexOf("-bm"),i>=0&&(s.bumpScale=parseFloat(e[i+1]),e.splice(i,2)),i=e.indexOf("-s"),i>=0&&(n.scale.set(parseFloat(e[i+1]),parseFloat(e[i+2])),e.splice(i,4)),i=e.indexOf("-o"),i>=0&&(n.offset.set(parseFloat(e[i+1]),parseFloat(e[i+2])),e.splice(i,4)),n.url=e.join(" ").trim(),n}loadTexture(t,s,n,e,i){const r=this.manager!==void 0?this.manager:pe;let c=r.getHandler(t);c===null&&(c=new me(r)),c.setCrossOrigin&&c.setCrossOrigin(this.crossOrigin);const a=c.load(t,n,e,i);return s!==void 0&&(a.mapping=s),a}}const Ve=/^[og]\s*(.+)?/,Be=/^mtllib /,Ee=/^usemtl /,Te=/^usemap /,Y=new F,R=new F,ee=new F,te=new F,_=new F,V=new B;function Ie(){const b={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,s){if(this.object&&this.object.fromDeclaration===!1){this.object.name=t,this.object.fromDeclaration=s!==!1;return}const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:s!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,i){const r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);const c={index:this.materials.length,name:e||"",mtllib:Array.isArray(i)&&i.length>0?i[i.length-1]:"",smooth:r!==void 0?r.smooth:this.smooth,groupStart:r!==void 0?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(a){const p={index:typeof a=="number"?a:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return p.clone=this.clone.bind(p),p}};return this.materials.push(c),c},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const i=this.currentMaterial();if(i&&i.groupEnd===-1&&(i.groupEnd=this.geometry.vertices.length/3,i.groupCount=i.groupEnd-i.groupStart,i.inherited=!1),e&&this.materials.length>1)for(let r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),i}},n&&n.name&&typeof n.clone=="function"){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,s){const n=parseInt(t,10);return(n>=0?n-1:n+s/3)*3},parseNormalIndex:function(t,s){const n=parseInt(t,10);return(n>=0?n-1:n+s/3)*3},parseUVIndex:function(t,s){const n=parseInt(t,10);return(n>=0?n-1:n+s/2)*2},addVertex:function(t,s,n){const e=this.vertices,i=this.object.geometry.vertices;i.push(e[t+0],e[t+1],e[t+2]),i.push(e[s+0],e[s+1],e[s+2]),i.push(e[n+0],e[n+1],e[n+2])},addVertexPoint:function(t){const s=this.vertices;this.object.geometry.vertices.push(s[t+0],s[t+1],s[t+2])},addVertexLine:function(t){const s=this.vertices;this.object.geometry.vertices.push(s[t+0],s[t+1],s[t+2])},addNormal:function(t,s,n){const e=this.normals,i=this.object.geometry.normals;i.push(e[t+0],e[t+1],e[t+2]),i.push(e[s+0],e[s+1],e[s+2]),i.push(e[n+0],e[n+1],e[n+2])},addFaceNormal:function(t,s,n){const e=this.vertices,i=this.object.geometry.normals;Y.fromArray(e,t),R.fromArray(e,s),ee.fromArray(e,n),_.subVectors(ee,R),te.subVectors(Y,R),_.cross(te),_.normalize(),i.push(_.x,_.y,_.z),i.push(_.x,_.y,_.z),i.push(_.x,_.y,_.z)},addColor:function(t,s,n){const e=this.colors,i=this.object.geometry.colors;e[t]!==void 0&&i.push(e[t+0],e[t+1],e[t+2]),e[s]!==void 0&&i.push(e[s+0],e[s+1],e[s+2]),e[n]!==void 0&&i.push(e[n+0],e[n+1],e[n+2])},addUV:function(t,s,n){const e=this.uvs,i=this.object.geometry.uvs;i.push(e[t+0],e[t+1]),i.push(e[s+0],e[s+1]),i.push(e[n+0],e[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const s=this.uvs;this.object.geometry.uvs.push(s[t+0],s[t+1])},addFace:function(t,s,n,e,i,r,c,a,p){const C=this.vertices.length;let h=this.parseVertexIndex(t,C),w=this.parseVertexIndex(s,C),o=this.parseVertexIndex(n,C);if(this.addVertex(h,w,o),this.addColor(h,w,o),c!==void 0&&c!==""){const l=this.normals.length;h=this.parseNormalIndex(c,l),w=this.parseNormalIndex(a,l),o=this.parseNormalIndex(p,l),this.addNormal(h,w,o)}else this.addFaceNormal(h,w,o);if(e!==void 0&&e!==""){const l=this.uvs.length;h=this.parseUVIndex(e,l),w=this.parseUVIndex(i,l),o=this.parseUVIndex(r,l),this.addUV(h,w,o),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const s=this.vertices.length;for(let n=0,e=t.length;n<e;n++){const i=this.parseVertexIndex(t[n],s);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(t,s){this.object.geometry.type="Line";const n=this.vertices.length,e=this.uvs.length;for(let i=0,r=t.length;i<r;i++)this.addVertexLine(this.parseVertexIndex(t[i],n));for(let i=0,r=s.length;i<r;i++)this.addUVLine(this.parseUVIndex(s[i],e))}};return b.startObject("",!1),b}class Re extends ie{constructor(t){super(t),this.materials=null}load(t,s,n,e){const i=this,r=new ne(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(c){try{s(i.parse(c))}catch(a){e?e(a):console.error(a),i.manager.itemError(t)}},n,e)}setMaterials(t){return this.materials=t,this}parse(t){const s=new Ie;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const n=t.split(`
`);let e="",i="",r=0,c=[];const a=typeof"".trimLeft=="function";for(let h=0,w=n.length;h<w;h++)if(e=n[h],e=a?e.trimLeft():e.trim(),r=e.length,r!==0&&(i=e.charAt(0),i!=="#"))if(i==="v"){const o=e.split(/\s+/);switch(o[0]){case"v":s.vertices.push(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])),o.length>=7?(V.setRGB(parseFloat(o[4]),parseFloat(o[5]),parseFloat(o[6])).convertSRGBToLinear(),s.colors.push(V.r,V.g,V.b)):s.colors.push(void 0,void 0,void 0);break;case"vn":s.normals.push(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]));break;case"vt":s.uvs.push(parseFloat(o[1]),parseFloat(o[2]));break}}else if(i==="f"){const l=e.slice(1).trim().split(/\s+/),v=[];for(let x=0,L=l.length;x<L;x++){const z=l[x];if(z.length>0){const M=z.split("/");v.push(M)}}const u=v[0];for(let x=1,L=v.length-1;x<L;x++){const z=v[x],M=v[x+1];s.addFace(u[0],z[0],M[0],u[1],z[1],M[1],u[2],z[2],M[2])}}else if(i==="l"){const o=e.substring(1).trim().split(" ");let l=[];const v=[];if(e.indexOf("/")===-1)l=o;else for(let u=0,x=o.length;u<x;u++){const L=o[u].split("/");L[0]!==""&&l.push(L[0]),L[1]!==""&&v.push(L[1])}s.addLineGeometry(l,v)}else if(i==="p"){const l=e.slice(1).trim().split(" ");s.addPointGeometry(l)}else if((c=Ve.exec(e))!==null){const o=(" "+c[0].slice(1).trim()).slice(1);s.startObject(o)}else if(Ee.test(e))s.object.startMaterial(e.substring(7).trim(),s.materialLibraries);else if(Be.test(e))s.materialLibraries.push(e.substring(7).trim());else if(Te.test(e))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(i==="s"){if(c=e.split(" "),c.length>1){const l=c[1].trim().toLowerCase();s.object.smooth=l!=="0"&&l!=="off"}else s.object.smooth=!0;const o=s.object.currentMaterial();o&&(o.smooth=s.object.smooth)}else{if(e==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+e+'"')}s.finalize();const p=new he;if(p.materialLibraries=[].concat(s.materialLibraries),!(s.objects.length===1&&s.objects[0].geometry.vertices.length===0)===!0)for(let h=0,w=s.objects.length;h<w;h++){const o=s.objects[h],l=o.geometry,v=o.materials,u=l.type==="Line",x=l.type==="Points";let L=!1;if(l.vertices.length===0)continue;const z=new q;z.setAttribute("position",new k(l.vertices,3)),l.normals.length>0&&z.setAttribute("normal",new k(l.normals,3)),l.colors.length>0&&(L=!0,z.setAttribute("color",new k(l.colors,3))),l.hasUVIndices===!0&&z.setAttribute("uv",new k(l.uvs,2));const M=[];for(let d=0,y=v.length;d<y;d++){const g=v[d],f=g.name+"_"+g.smooth+"_"+L;let m=s.materials[f];if(this.materials!==null){if(m=this.materials.create(g.name),u&&m&&!(m instanceof T)){const j=new T;J.prototype.copy.call(j,m),j.color.copy(m.color),m=j}else if(x&&m&&!(m instanceof O)){const j=new O({size:10,sizeAttenuation:!1});J.prototype.copy.call(j,m),j.color.copy(m.color),j.map=m.map,m=j}}m===void 0&&(u?m=new T:x?m=new O({size:1,sizeAttenuation:!1}):m=new D,m.name=g.name,m.flatShading=!g.smooth,m.vertexColors=L,s.materials[f]=m),M.push(m)}let A;if(M.length>1){for(let d=0,y=v.length;d<y;d++){const g=v[d];z.addGroup(g.groupStart,g.groupCount,d)}u?A=new Z(z,M):x?A=new I(z,M):A=new S(z,M)}else u?A=new Z(z,M[0]):x?A=new I(z,M[0]):A=new S(z,M[0]);A.name=o.name,p.add(A)}else if(s.vertices.length>0){const h=new O({size:1,sizeAttenuation:!1}),w=new q;w.setAttribute("position",new k(s.vertices,3)),s.colors.length>0&&s.colors[0]!==void 0&&(w.setAttribute("color",new k(s.colors,3)),h.vertexColors=!0);const o=new I(w,h);p.add(o)}return p}}const De=[{type:"model",fileName:"ground",name:"ground",position:{x:-50,y:0,z:-15},scale:.05},{type:"model",fileName:"frontGround",name:"frontGround",position:{x:-50,y:0,z:-15},scale:.05},{type:"model",fileName:"wait1",name:"wait1",position:{x:-50,y:0,z:-15},scale:.05},{type:"model",fileName:"wait2",name:"wait2",position:{x:-50,y:0,z:-15},scale:.05},{type:"model",fileName:"wait3",name:"wait3",position:{x:-50,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge1",position:{x:-50,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge1-1",position:{x:-50,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge2",position:{x:-56,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge2-1",position:{x:-56,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge3",position:{x:-48,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge3-1",position:{x:-48,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge4",position:{x:-52.8,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge4-1",position:{x:-52.8,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge5",position:{x:-70.5,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge5-1",position:{x:-70.5,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge6",position:{x:-65.1,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge6-1",position:{x:-65.1,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge7",position:{x:-80.5,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge7-1",position:{x:-80.5,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge8",position:{x:-82.5,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge8-1",position:{x:-82.5,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge9",position:{x:-85,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge9-1",position:{x:-85,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge1",name:"bridge10",position:{x:-88,y:0,z:-15},scale:.05},{type:"model",fileName:"bridge1",name:"bridge10-1",position:{x:-88,y:0,z:-20},scale:.05},{type:"model",fileName:"bridge2",name:"bridge2-1",position:{x:-48,y:0,z:-15},scale:.05},{type:"model",fileName:"fj",name:"plane1",position:{x:28.5,y:0,z:-3},scale:.01,rotation:{x:0,y:119.6,z:0}},{type:"model",fileName:"fj",name:"plane1-1",position:{x:28.8,y:0,z:5},scale:.01,rotation:{x:0,y:185,z:0}},{type:"model",fileName:"fj",name:"plane2",position:{x:24.5,y:0,z:-3},scale:.01,rotation:{x:0,y:119.6,z:0}},{type:"model",fileName:"fj",name:"plane2-1",position:{x:23.8,y:0,z:5},scale:.01,rotation:{x:0,y:185,z:0}},{type:"model",fileName:"fj",name:"plane3",position:{x:17,y:0,z:-3},scale:.01,rotation:{x:0,y:119.6,z:0}},{type:"model",fileName:"fj",name:"plane3-1",position:{x:17,y:0,z:5},scale:.01,rotation:{x:0,y:185,z:0}},{type:"model",fileName:"fj",name:"plane4",position:{x:9,y:0,z:-3},scale:.01,rotation:{x:0,y:119.6,z:0}},{type:"model",fileName:"fj",name:"plane4-1",position:{x:9,y:0,z:5},scale:.01,rotation:{x:0,y:185,z:0}},{type:"model",fileName:"fj",name:"animatePlane",position:{x:35,y:0,z:21.25},scale:.02,rotation:{x:0,y:4.78,z:0}},{type:"tip",name:"planeErrorTip",textConfig:{value:"\u6B63\u5728\u68C0\u4FEE\u4E2D...",bgColor:"#ff0000",fontColor:"#ffffff"},position:{x:28.5,y:1.5,z:-3}},{type:"tip",name:"putoffTip",textConfig:{value:"\u665A\u70B9 00:40",bgColor:"#ff0000",fontColor:"#ffffff"},position:{x:9,y:1.5,z:-3}},{type:"tip",name:"bridgeErrorTip",textConfig:{value:"\u673A\u68B0\u6545\u969C",bgColor:"#ff0000",fontColor:"#ffffff"},position:{x:13.8,y:2,z:4}}];const Ue={setup(){let b,t,s,n,e;const i=()=>{b=new ge;const d=new ye(120);b.add(d);const y=new be(.2,.2,.2),g=new xe,f=new S(y,g);b.add(f)},r=()=>{t=new we(20,window.innerWidth/window.innerHeight,.1,5e3),t.position.set(100,100,100),t.lookAt(b.position),b.add(t)},c=()=>{const d=document.querySelector("#webgl");s=new ve({antialias:!0,alpha:!0}),s.setClearAlpha(.2),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.shadowMap.enabled=!0,s.render(b,t),d==null||d.appendChild(s.domElement)},a=()=>{var d;n=new Pe,n.setSize(window.innerWidth,window.innerHeight),n.domElement.style.position="absolute",n.domElement.style.top="0",n.domElement.style.pointerEvents="none",(d=document.querySelector("#webgl"))==null||d.appendChild(n.domElement)},p=()=>{e=new ze(t,s.domElement),e.target.set(0,0,0),e.autoRotate=!1,e.enableDamping=!0,e.enableZoom=!0,e.enablePan=!0},C=()=>{requestAnimationFrame(C),e.update(),s.render(b,t)},h=()=>{const d=new Ce(16777215);b.add(d);const y=new Le("#ffffff",2.4,0);y.position.set(0,200,0),b.add(y);const g=new Me(16777215,2.4);g.position.set(0,50,0),g.castShadow=!1,b.add(g)},w=d=>{console.log(d)},o=()=>{},l=new Se;l.setPath("/objs/");const v=(d,y,g,f=.01,m)=>{l.load(d+".mtl",j=>{j.preload();var E=new Re;E.setMaterials(j),E.setPath("objs/"),E.load(d+".obj",P=>{var U,G,H;P.position.set(g.x,g.y,g.z),P.rotation.set((U=m==null?void 0:m.x)!=null?U:0,(G=m==null?void 0:m.y)!=null?G:0,(H=m==null?void 0:m.z)!=null?H:0),P.scale.set(f,f,f),P.name=y,b.add(P)},w,o)})},u=(d,y,g)=>{const f=new je(3,1,1,1),m=new S(f,L(y.value,{bgColor:y.bgColor,fontColor:y.fontColor}));m.position.set(g.x,g.y,g.z),m.name=d,b.add(m)},x=()=>{De.forEach(f=>{switch(f.type){case"model":v(f.fileName,f.name,f.position,f.scale,f==null?void 0:f.rotation);break;case"tip":u(f.name,f.textConfig,f.position);break}});var y=document.createElement("div");y.className="the-animate-modal",y.innerHTML="<div>HU 7635</div><div>Boeing 787</div>",y.classList.add("hide");const g=new ae(y);g.name="planeAnimateModal",b.add(g)},L=(d,y={bgColor:"",fontColor:""})=>{const g=document.createElement("canvas");g.width=512,g.height=128;const f=g.getContext("2d");f&&(f.fillStyle=y.bgColor||"#ff0000",f.fillRect(0,0,512,128),f.beginPath(),f.beginPath(),f.translate(256,64),f.fillStyle=y.fontColor||"#ffffff",f.font="bold 36px \u5FAE\u8F6F\u96C5\u9ED1",f.textBaseline="middle",f.textAlign="center",f.fillText(d,0,0));const m=new _e(g),j=new D({map:m,transparent:!0,opacity:.9});return j.map&&(j.map.needsUpdate=!0),j},z=()=>{s.render(b,t),n.render(b,t);const d=b.getObjectByName("animatePlane");if(d){d.position.x-=.2,d.position.x<-10&&(d.position.y+=.02),d.position.x<-100&&(d.position.x=35,d.position.y=0);const y=b.getObjectByName("planeAnimateModal");y&&(y.position.set(d.position.x,d.position.y+4.5,d.position.z),y.element.classList.remove("hide"))}requestAnimationFrame(z)},M=()=>{i(),r(),c(),a(),p(),h(),x(),z()},A=()=>{const d=b.getObjectByName("bridge2-1");d==null||d.traverse(y=>{y instanceof S&&(y.material=new ue({color:16711680,transparent:!0,opacity:.8}))})};return Ne(()=>{M(),C()}),{badTheBridge:A}}},Ge={class:"main"},He=oe("div",{id:"webgl"},null,-1);function We(b,t,s,n,e,i){return Fe(),ke("div",Ge,[He,oe("button",{class:"bad-btn",onClick:t[0]||(t[0]=(...r)=>n.badTheBridge&&n.badTheBridge(...r))},"\u767B\u673A\u6865\u635F\u574F")])}var Ze=Ae(Ue,[["render",We]]);export{Ze as default};
